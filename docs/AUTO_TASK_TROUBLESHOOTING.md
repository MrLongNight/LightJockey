# Auto-Task Workflow - Troubleshooting Guide

## Problem: Copilot Agent Does Not Start Automatically

### Current Behavior
The automation workflow (`flow-autotask_01-start.yml`) successfully:
- ✅ Creates GitHub Issues for uncompleted tasks
- ✅ Creates draft Pull Requests  
- ✅ Links issues to PRs
- ❌ **Does NOT automatically start Copilot Workspace**

### Why This Happens

**GitHub Copilot Workspace is currently not programmable via GitHub Actions.**

GitHub Copilot Workspace is an interactive tool that requires manual activation:
- It cannot be triggered via GitHub API
- It cannot be invoked from GitHub Actions workflows
- It must be manually started from the GitHub UI

### Available Workarounds

#### Option 1: Manual Copilot Workspace Activation (Recommended)

When the automation creates a PR:

1. **Navigate to the created Issue**
   - Check your GitHub notifications
   - Or go to the repository Issues tab
   - Find the issue labeled `autogenerated`

2. **Open Copilot Workspace**
   - Click the Copilot icon in the issue
   - Select "Open in Copilot Workspace"
   - Or use the command palette: `Ctrl+K` → "Copilot Workspace"

3. **Let Copilot Work**
   - Copilot will analyze the issue
   - It will create a plan
   - It will implement the code
   - It will commit to the PR automatically

4. **CI Takes Over**
   - Once Copilot commits changes
   - CI runs build and tests
   - If successful, `flow-autotask_02-merge.yml` auto-merges
   - Then the next task starts automatically

#### Option 2: Use Copilot in VS Code/IDE

1. **Clone and checkout the branch**:
   ```bash
   git fetch origin
   git checkout feature/task-X-autogenerated
   ```

2. **Use GitHub Copilot Chat**:
   - Open Copilot Chat in VS Code
   - Paste the task description from the issue
   - Ask: "Implement this task"
   - Review and accept suggestions

3. **Commit and push**:
   ```bash
   git add .
   git commit -m "Implement Task X"
   git push origin feature/task-X-autogenerated
   ```

4. **CI auto-merges** if tests pass

#### Option 3: Fully Manual Implementation

1. Checkout the created branch
2. Read the issue description
3. Implement according to development plan
4. Commit and push changes
5. Wait for CI and auto-merge

### Improving the Workflow

#### Short-term Fix
The new workflow `flow-autotask_01b-notify-copilot.yml`:
- Comments on new auto-generated PRs
- Provides clear instructions
- Assigns PR to repository owner for visibility
- Marks the PR as requiring action

#### Long-term Solutions

**When GitHub enables programmatic access:**

```yaml
# Future workflow (not yet possible)
- name: Trigger Copilot Workspace
  uses: github/copilot-workspace@v1  # Hypothetical
  with:
    issue_number: ${{ steps.create_issue.outputs.result }}
    auto_commit: true
```

**Alternative: Custom AI Agent**

You could build a custom agent using:
- GitHub Copilot API (when available)
- OpenAI API with repository context
- Custom code generation tools

### Configuration

#### Enable Notifications

To ensure you see when new tasks are created:

1. **Go to repository Settings**
2. **Navigate to Notifications**
3. **Enable**:
   - "Notify on issue creation"
   - "Notify on PR creation"
   - Or watch the repository

#### Repository Variable

Ensure `AUTOMATION_ENABLED` is set to `true`:

1. Go to **Settings** → **Secrets and variables** → **Actions**
2. Under **Variables**, add:
   - Name: `AUTOMATION_ENABLED`
   - Value: `true`

### Workflow Sequence

Here's the complete intended flow:

```
1. Push to main
   ↓
2. flow-autotask_01-start.yml
   - Finds next uncompleted task
   - Creates issue
   - Creates branch & draft PR
   ↓
3. flow-autotask_01b-notify-copilot.yml  ← NEW
   - Comments on PR with instructions
   - Assigns to owner
   ↓
4. **MANUAL STEP** ⚠️
   - User activates Copilot Workspace
   - Copilot implements the task
   - Copilot commits to PR
   ↓
5. flow-ci_01-build-and-test.yml
   - Builds code
   - Runs tests
   - Reports success/failure
   ↓
6. flow-autotask_02-merge.yml
   - Converts PR from draft to ready
   - Adds automerge label
   - Merges if CI passed
   ↓
7. Push to main (merged PR)
   ↓
8. LOOP back to step 1
```

### Monitoring Automation

**Check if automation is working**:

```bash
# List recent workflow runs
gh run list --workflow=flow-autotask_01-start.yml

# View specific run logs
gh run view <run-id> --log

# Check for created issues
gh issue list --label autogenerated

# Check for created PRs  
gh pr list --label autogenerated
```

### Common Issues

#### "No tasks are being created"

**Check**:
1. `AUTOMATION_ENABLED` variable is set to `true`
2. The development plan has uncompleted tasks
3. Workflow has proper permissions

#### "Issue created but nothing happens"

**This is expected!** You must manually activate Copilot Workspace.

#### "I don't have access to Copilot Workspace"

**Alternatives**:
- Use Copilot in your IDE
- Implement manually
- Request GitHub Copilot Workspace access

### Future Enhancements

Track these GitHub features for full automation:

- [ ] GitHub Copilot Workspace API
- [ ] GitHub Actions integration for Copilot
- [ ] Programmatic Copilot triggers
- [ ] Custom AI agent support

### Questions?

If you're still having trouble, please:
1. Check the workflow run logs in Actions tab
2. Verify all prerequisites are met
3. Open a discussion in the repository

---

**Last Updated**: November 12, 2025  
**Status**: Partial automation available, manual Copilot activation required
