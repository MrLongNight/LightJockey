# Quick Start: Using Auto-Task Automation with GitHub Copilot

This guide explains how to use the automated task workflow for LightJockey development with GitHub Copilot Coding Agent.

## TL;DR - The Complete Automation

The automation now works like this:
1. ‚úÖ Workflow creates issue + PR automatically
2. ‚ö†Ô∏è **Click "Assign to Copilot" button on the issue** ‚Üê Only manual step!
3. ‚úÖ Copilot Coding Agent implements the code automatically
4. ‚úÖ CI tests automatically
5. ‚úÖ **PR auto-approves itself** ‚Üê NEW!
6. ‚úÖ **PR auto-merges when tests pass** ‚Üê IMPROVED!
7. ‚úÖ Process repeats for next task

**Result: TRUE 100% AUTOMATION after Copilot activation!** üéâ

**New**: We now use [GitHub Copilot's agentic workflows](https://github.blog/ai-and-ml/github-copilot/from-idea-to-pr-a-guide-to-github-copilots-agentic-workflows/) for true automation!

## How to Activate the Automation

### Initial Setup

1. **Enable Automation**:
   - Go to **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions** ‚Üí **Variables**
   - Add new variable:
     - Name: `AUTOMATION_ENABLED`
     - Value: `true`

2. **Enable Workflow Permissions** (CRITICAL for auto-merge):
   - Go to **Settings** ‚Üí **Actions** ‚Üí **General** ‚Üí **Workflow permissions**
   - Select: **Read and write permissions**
   - ‚úÖ Check: **Allow GitHub Actions to create and approve pull requests**

3. **Enable Auto-Merge Feature**:
   - Go to **Settings** ‚Üí **General** ‚Üí **Pull Requests**
   - ‚úÖ Check: **Allow auto-merge**
   - ‚úÖ Check: **Allow squash merging**

4. **Push to main** or **manually trigger** the workflow:
   ```bash
   # Option A: Trigger via command line
   gh workflow run flow-autotask_01-start.yml
   
   # Option B: Via GitHub UI
   # Actions ‚Üí Flow Auto-Task 01 ‚Üí Run workflow
   ```

5. **Wait a moment** - The workflow will:
   - Find the next uncompleted task from `LIGHTJOCKEY_Entwicklungsplan.md`
   - Create a GitHub issue
   - Create a feature branch
   - Create a draft PR

### Complete a Task (Using Copilot Coding Agent)

When you receive a notification about a new issue/PR:

#### Method 1: GitHub Copilot Coding Agent (Recommended - Fully Automated)

1. **Open the Issue**:
   - Click the notification or go to Issues tab
   - Find the issue with `autogenerated` and `copilot-task` labels
   - A workflow has already added instructions and marked it as `ready-for-copilot`

2. **Assign to Copilot Agent**:
   - **Option A**: Look for the Copilot button in the issue UI and click "Assign to Copilot"
   - **Option B**: Add the label `copilot:implement` to the issue
   - **Option C**: Use CLI: `gh copilot issue assign <issue-number>`

3. **Watch the Magic**:
   - Copilot Coding Agent will automatically:
     - ‚ú® Analyze the task requirements from the issue
     - ‚ú® Read the development plan and existing code
     - ‚ú® Generate a detailed implementation plan
     - ‚ú® Write the code following MVVM patterns
     - ‚ú® Create comprehensive unit tests
     - ‚ú® Update documentation
     - ‚ú® Commit all changes to the feature branch
     - ‚ú® Update the PR with progress logs
   - All of this happens **automatically**!

4. **Monitor Progress**:
   - Check the linked PR for commits from the agent
   - Read the implementation logs in PR comments
   - Watch CI run tests automatically

5. **Auto-Merge** (NEW - 100% Automatic!):
   - Once CI tests pass, the workflow automatically:
     - ‚úÖ Converts PR from draft to ready for review
     - ‚úÖ **Auto-approves the PR** (no manual review needed!)
     - ‚úÖ **Enables auto-merge**
     - ‚úÖ **Merges the PR** when all checks pass
   - Next task starts automatically
   - **No manual intervention required!** üéâ

**That's it!** Just one click to assign Copilot, then **EVERYTHING else is 100% automated** - including approval and merge!

#### Method 2: Copilot in VS Code

1. **Clone and checkout**:
   ```bash
   git fetch origin
   git checkout feature/task-13-autogenerated  # Replace with actual branch
   ```

2. **Open in VS Code** with GitHub Copilot extension

3. **Use Copilot Chat**:
   - Open Copilot Chat panel
   - Copy task description from the issue
   - Ask: "Implement this task: [paste description]"

4. **Review and commit**:
   ```bash
   git add .
   git commit -m "Implement Task 13: Preset Import/Export"
   git push origin feature/task-13-autogenerated
   ```

5. **CI auto-merges** if tests pass

#### Method 3: Manual Implementation

1. **Checkout branch**:
   ```bash
   git checkout feature/task-X-autogenerated
   ```

2. **Read task description** in the issue

3. **Implement the code** following the development plan

4. **Commit and push**:
   ```bash
   git add .
   git commit -m "Implement Task X"
   git push
   ```

## Monitoring Progress

### Check Automation Status

```bash
# List workflow runs
gh run list --workflow=flow-autotask_01-start.yml

# Check for pending tasks
gh issue list --label autogenerated --state open

# Check auto-generated PRs
gh pr list --label autogenerated --state open
```

### View Logs

```bash
# View latest workflow run
gh run view --log

# View specific workflow
gh run view <run-id> --log
```

## What Gets Automated

### ‚úÖ Fully Automated (100% - No Manual Steps!)
- Finding next uncompleted task
- Creating GitHub issue
- Creating feature branch
- Creating draft PR
- Running CI tests
- **Auto-approving PRs** üÜï
- **Auto-merging successful PRs** üÜï
- Starting next task after merge

### ‚ö†Ô∏è Requires One-Time Manual Action Per Task
- **Activating Copilot Agent** - Click "Assign to Copilot" on the issue (GitHub limitation)
- (Optional) Reviewing Copilot's changes before merge if you want extra control

### ‚ùå No Longer Required
- ~~Manual PR review approval~~ ‚Üí Now automatic!
- ~~Manual merge clicks~~ ‚Üí Now automatic!
- ~~Handling merge conflicts~~ ‚Üí Workflow handles or reports
- ~~Confirming test results~~ ‚Üí Auto-approved when green

## Troubleshooting

### "Nothing happens after issue is created"

**This is expected!** You need to manually activate Copilot Workspace. See Method 1 above.

### "I don't have Copilot Workspace access"

Use Method 2 (Copilot in VS Code) or Method 3 (manual implementation) instead.

### "Workflow says automation is disabled"

Check that `AUTOMATION_ENABLED` variable is set to `true` in repository settings.

### "PR won't merge automatically"

**New Solution:** The workflow now auto-approves and enables auto-merge!

Check:
- ‚úÖ Workflow permissions enabled: Settings ‚Üí Actions ‚Üí General ‚Üí "Allow GitHub Actions to create and approve pull requests"
- ‚úÖ Auto-merge feature enabled: Settings ‚Üí General ‚Üí Pull Requests ‚Üí "Allow auto-merge"
- ‚úÖ CI tests passed (green checkmark)
- ‚úÖ PR has `autogenerated` label
- ‚úÖ No merge conflicts
- ‚úÖ AUTOMATION_ENABLED variable is set to `true`

If still failing, check workflow logs:
```bash
gh run list --workflow=flow-autotask_02-merge.yml
gh run view <run-id> --log
```

## Advanced: Batch Processing

To process multiple tasks in sequence:

1. **Enable automation** (one-time setup)
2. **Activate Copilot for first task** (manual)
3. **Wait for auto-merge** (automatic)
4. **Next task auto-creates** (automatic)
5. **Activate Copilot for second task** (manual)
6. **Repeat steps 3-5** until all tasks complete

## Tips for Efficiency

1. **Enable Notifications**: Watch the repository to get notified immediately
2. **Use Keyboard Shortcuts**: `Ctrl+K` to quickly open Copilot
3. **Keep VS Code Open**: Switch between browser and IDE quickly
4. **Batch Review**: Let multiple tasks queue, then review all at once

## Getting Help

- üìñ [Auto-Task Troubleshooting Guide](docs/AUTO_TASK_TROUBLESHOOTING.md)
- üìñ [Development Plan](LIGHTJOCKEY_Entwicklungsplan.md)
- üìñ [Workflow Documentation](.github/workflows/README.md)

## Summary

**Remember**: The automation creates the issue/PR automatically, **YOU MUST manually start Copilot** to get the actual work done (GitHub's current limitation). After that, **EVERYTHING else is 100% automatic** - including PR approval and merge!

The complete cycle:
```
Auto ‚Üí Manual ‚Üí Auto ‚Üí Auto ‚Üí Auto ‚Üí Auto
(Create) ‚Üí (Copilot) ‚Üí (Code) ‚Üí (Test) ‚Üí (Approve) ‚Üí (Merge)
         ‚Üë ONE CLICK              ‚Üë NEW!    ‚Üë NEW!
```

**TRUE 100% AUTOMATION** after Copilot activation! No more manual reviews or merge clicks needed! üöÄ

For detailed configuration instructions, see [AUTOMATISCHES_MERGEN_KONFIGURATION.md](AUTOMATISCHES_MERGEN_KONFIGURATION.md)

Happy coding! üöÄ
